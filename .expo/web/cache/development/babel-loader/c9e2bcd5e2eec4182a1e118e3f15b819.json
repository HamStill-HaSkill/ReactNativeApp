{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"D:\\\\Progi\\\\amupark\\\\amupark\\\\src\\\\Map\\\\Map.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { useState, useEffect, Component } from 'react';\nimport { firebase } from \"../firebase/config\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { useNavigation } from '@react-navigation/native';\nimport MapView, { Marker, PROVIDER_GOOGLE } from 'react-native-maps';\n\nvar Map = function (_Component) {\n  _inherits(Map, _Component);\n\n  var _super = _createSuper(Map);\n\n  function Map(props) {\n    var _this;\n\n    _classCallCheck(this, Map);\n\n    _this = _super.call(this, props);\n\n    _this.getMarkers = function () {\n      var navigation = _this.props.navigation;\n      return _this.state.parksData.map(function (item) {\n        return React.createElement(Marker, {\n          key: item.id,\n          coordinate: {\n            latitude: item.geo.latitude,\n            longitude: item.geo.longitude\n          },\n          title: item.name,\n          description: item.description,\n          onPress: function onPress() {\n            return navigation.navigate(\"Detail\", {\n              item: item\n            });\n          },\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 51\n          }\n        });\n      });\n    };\n\n    _this.state = {\n      props: props,\n      parksData: []\n    };\n    return _this;\n  }\n\n  _createClass(Map, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var entityRef = firebase.firestore().collection('parks');\n      var userID = this.state.props.user.id;\n      entityRef.onSnapshot(function (query) {\n        var parks = [];\n        query.forEach(function (park) {\n          var data = park.data();\n          parks.push({\n            id: park.id,\n            src: data.src,\n            name: data.name,\n            geo: data.geo,\n            description: data.description,\n            location: data.location\n          });\n        });\n\n        _this2.setState({\n          parksData: parks\n        });\n      }, function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(MapView, {\n        style: {\n          flex: 1\n        },\n        provider: PROVIDER_GOOGLE,\n        showsUserLocationinitialRegion: {\n          latitude: 37.78825,\n          longitude: -122.4324,\n          latitudeDelta: 0.0922,\n          longitudeDelta: 0.0421\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 9\n        }\n      }, this.getMarkers());\n    }\n  }]);\n\n  return Map;\n}(Component);\n\n;\nexport default Map;\nvar styles = StyleSheet.create({});","map":{"version":3,"sources":["D:/Progi/amupark/amupark/src/Map/Map.js"],"names":["React","useState","useEffect","Component","firebase","useNavigation","MapView","Marker","PROVIDER_GOOGLE","Map","props","getMarkers","navigation","state","parksData","map","item","id","latitude","geo","longitude","name","description","navigate","entityRef","firestore","collection","userID","user","onSnapshot","query","parks","forEach","park","data","push","src","location","setState","error","console","log","flex","latitudeDelta","longitudeDelta","styles","StyleSheet","create"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,SAArC,QAAsD,OAAtD;AACA,SAASC,QAAT;;;AAEA,SAASC,aAAT,QAA8B,0BAA9B;AACA,OAAOC,OAAP,IAAkBC,MAAlB,EAA0BC,eAA1B,QAAiD,mBAAjD;;IAEMC,G;;;;;AACF,eAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,8BAAMA,KAAN;;AADe,UAqCnBC,UArCmB,GAqCN,YAAM;AAAA,UACPC,UADO,GACQ,MAAKF,KADb,CACPE,UADO;AAEf,aAAO,MAAKC,KAAL,CAAWC,SAAX,CAAqBC,GAArB,CAAyB,UAACC,IAAD;AAAA,eAAU,oBAAC,MAAD;AAClC,UAAA,GAAG,EAAEA,IAAI,CAACC,EADwB;AAElC,UAAA,UAAU,EAAE;AAACC,YAAAA,QAAQ,EAAEF,IAAI,CAACG,GAAL,CAASD,QAApB;AAA8BE,YAAAA,SAAS,EAAEJ,IAAI,CAACG,GAAL,CAASC;AAAlD,WAFsB;AAGlC,UAAA,KAAK,EAAEJ,IAAI,CAACK,IAHsB;AAIlC,UAAA,WAAW,EAAEL,IAAI,CAACM,WAJgB;AAIH,UAAA,OAAO,EAAE;AAAA,mBAAMV,UAAU,CAACW,QAAX,CAAoB,QAApB,EAA8B;AAACP,cAAAA,IAAI,EAAJA;AAAD,aAA9B,CAAN;AAAA,WAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAV;AAAA,OAAzB,CAAP;AAMH,KA7CkB;;AAGf,UAAKH,KAAL,GAAa;AACTH,MAAAA,KAAK,EAAEA,KADE;AAETI,MAAAA,SAAS,EAAE;AAFF,KAAb;AAHe;AAOhB;;;;WAMH,6BAAoB;AAAA;;AAChB,UAAMU,SAAS,GAAGpB,QAAQ,CAACqB,SAAT,GAAqBC,UAArB,CAAgC,OAAhC,CAAlB;AACA,UAAMC,MAAM,GAAG,KAAKd,KAAL,CAAWH,KAAX,CAAiBkB,IAAjB,CAAsBX,EAArC;AACAO,MAAAA,SAAS,CAACK,UAAV,CAAqB,UAAAC,KAAK,EAAI;AACpB,YAAIC,KAAK,GAAG,EAAZ;AACAD,QAAAA,KAAK,CAACE,OAAN,CAAc,UAAAC,IAAI,EAAI;AAClB,cAAIC,IAAI,GAAGD,IAAI,CAACC,IAAL,EAAX;AACAH,UAAAA,KAAK,CAACI,IAAN,CAAW;AACTlB,YAAAA,EAAE,EAAEgB,IAAI,CAAChB,EADA;AAETmB,YAAAA,GAAG,EAAEF,IAAI,CAACE,GAFD;AAGTf,YAAAA,IAAI,EAAEa,IAAI,CAACb,IAHF;AAITF,YAAAA,GAAG,EAAEe,IAAI,CAACf,GAJD;AAKTG,YAAAA,WAAW,EAAEY,IAAI,CAACZ,WALT;AAMTe,YAAAA,QAAQ,EAAEH,IAAI,CAACG;AANN,WAAX;AAQH,SAVD;;AAWA,QAAA,MAAI,CAACC,QAAL,CAAc;AAACxB,UAAAA,SAAS,EAAEiB;AAAZ,SAAd;AACH,OAdP,EAeM,UAAAQ,KAAK,EAAI;AACLC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,OAjBP;AAmBH;;;WAYD,kBAAS;AACL,aACA,oBAAC,OAAD;AAAS,QAAA,KAAK,EAAE;AAAEG,UAAAA,IAAI,EAAE;AAAR,SAAhB;AAA6B,QAAA,QAAQ,EAAElC,eAAvC;AACA,QAAA,8BAA8B,EAAE;AAC5BU,UAAAA,QAAQ,EAAE,QADkB;AAE5BE,UAAAA,SAAS,EAAE,CAAC,QAFgB;AAG5BuB,UAAAA,aAAa,EAAE,MAHa;AAI5BC,UAAAA,cAAc,EAAE;AAJY,SADhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOK,KAAKjC,UAAL,EAPL,CADA;AAWP;;;;EA5DiBR,S;;AA6DjB;AACD,eAAeM,GAAf;AAEA,IAAMoC,MAAM,GAAGC,UAAU,CAACC,MAAX,CAAkB,EAAlB,CAAf","sourcesContent":["import React, { useState, useEffect, Component } from 'react';\r\nimport { firebase } from '../firebase/config';\r\nimport { StyleSheet, View } from 'react-native';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport MapView, { Marker, PROVIDER_GOOGLE } from 'react-native-maps';\r\n\r\nclass Map extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // Don't call this.setState() here!\r\n        this.state = { \r\n            props: props, \r\n            parksData: [],\r\n            };\r\n      }\r\n    \r\n\r\n    // let [parksData, setParksData] = useState([]);\r\n\r\n  \r\n    componentDidMount() {\r\n        const entityRef = firebase.firestore().collection('parks')\r\n        const userID = this.state.props.user.id;\r\n        entityRef.onSnapshot(query => {\r\n                  let parks = [];\r\n                  query.forEach(park => {\r\n                      let data = park.data();\r\n                      parks.push({\r\n                        id: park.id, \r\n                        src: data.src,\r\n                        name: data.name,\r\n                        geo: data.geo,\r\n                        description: data.description,\r\n                        location: data.location,\r\n                      })\r\n                  });\r\n                  this.setState({parksData: parks})\r\n              },\r\n              error => {\r\n                  console.log(error)\r\n              }\r\n          )\r\n    }\r\n\r\n    getMarkers = () => {\r\n        const { navigation } = this.props;\r\n        return this.state.parksData.map((item) => <Marker\r\n                key={item.id}\r\n                coordinate={{latitude: item.geo.latitude, longitude: item.geo.longitude}}\r\n                title={item.name}\r\n                description={item.description} onPress={() => navigation.navigate(\"Detail\", {item})}/>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n        <MapView style={{ flex: 1 }} provider={PROVIDER_GOOGLE}\r\n        showsUserLocationinitialRegion={{\r\n            latitude: 37.78825,\r\n            longitude: -122.4324,\r\n            latitudeDelta: 0.0922,\r\n            longitudeDelta: 0.0421,\r\n        }}>\r\n            {this.getMarkers()}\r\n        </MapView>\r\n    );\r\n}\r\n};\r\nexport default Map;\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n});\r\n"]},"metadata":{},"sourceType":"module"}